<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Serpent of Raiku</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
    background-color: #000;
    font-family: 'Orbitron', sans-serif;
    color: #00ff66;
  }

  #gameContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    gap: 20px;
  }

  canvas {
    background: radial-gradient(circle at center, #001900, #000);
    border: 2px solid #00ff66;
    box-shadow: 0 0 40px #00ff66;
  }

  #controls {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
  }

  .btn {
    background: #001900;
    border: 1px solid #00ff66;
    color: #00ff66;
    padding: 10px 16px;
    font-size: 18px;
    border-radius: 8px;
    cursor: pointer;
    box-shadow: 0 0 10px #00ff66;
  }
  .btn:hover { background: #003300; }

  #arrowControls {
    display: grid;
    grid-template-columns: repeat(3, 60px);
    gap: 5px;
  }

  #arrowControls button {
    background: #001900;
    border: 1px solid #00ff66;
    color: #00ff66;
    padding: 10px;
    border-radius: 8px;
    font-size: 20px;
    cursor: pointer;
  }

  #leaderboard {
    color: #00ff66;
    margin-top: 10px;
    text-align: center;
    font-size: 14px;
  }

  #logo {
    position: fixed;
    top: 20px;
    left: 20px;
    width: 300px; /* lebih besar */
    opacity: 0.95;
    filter: none;
  }

  #soundToggle {
    position: fixed;
    bottom: 10px;
    right: 10px;
    font-size: 16px;
    background: #001900;
    border: 1px solid #00ff66;
    color: #00ff66;
    padding: 6px 12px;
    border-radius: 6px;
    cursor: pointer;
  }
</style>
</head>
<body>
  <img id="logo" src="logo.png" alt="Raiku Logo" />
  <button id="soundToggle">üîà Sound ON</button>
  <div id="gameContainer">
    <canvas id="gameCanvas" width="900" height="700"></canvas>
    <div id="controls">
      <button id="pauseBtn" class="btn">‚è∏ Pause</button>
      <div id="arrowControls">
        <div></div>
        <button id="upBtn">‚¨ÜÔ∏è</button>
        <div></div>
        <button id="leftBtn">‚¨ÖÔ∏è</button>
        <div></div>
        <button id="rightBtn">‚û°Ô∏è</button>
        <div></div>
        <button id="downBtn">‚¨áÔ∏è</button>
        <div></div>
      </div>
      <div id="leaderboard">
        <h3>üèÜ Leaderboard</h3>
        <ol id="scoreList"></ol>
      </div>
    </div>
  </div>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

const headImg = new Image();
headImg.src = "head.png";

let gridSize = 20;
let tileCountX = canvas.width / gridSize;
let tileCountY = canvas.height / gridSize;

let snake = [{x: 10, y: 10}];
let vx = 1, vy = 0;
let apple = {x: 15, y: 15, gold: false};
let score = 0;
let speed = 120;
let gameLoop;
let paused = false;
let soundOn = true;
let bgm;

function playBgm() {
  if (!bgm) {
    bgm = new Audio("https://cdn.pixabay.com/download/audio/2022/03/15/audio_5b9389d41e.mp3?filename=epic-cinematic-trailer-111569.mp3");
    bgm.loop = true;
    bgm.volume = 0.5;
  }
  if (soundOn) bgm.play().catch(()=>{});
  else bgm.pause();
}

function toggleSound() {
  soundOn = !soundOn;
  document.getElementById("soundToggle").textContent = soundOn ? "üîà Sound ON" : "üîá Sound OFF";
  playBgm();
}

function drawGame() {
  if (paused) return;
  updateSnake();
  drawBackground();
  drawApple();
  drawSnake();
  drawScore();
}

function drawBackground() {
  const gradient = ctx.createRadialGradient(
    canvas.width/2, canvas.height/2, 200,
    canvas.width/2, canvas.height/2, canvas.width/1.5
  );
  gradient.addColorStop(0, "#001900");
  gradient.addColorStop(1, "#000");
  ctx.fillStyle = gradient;
  ctx.fillRect(0, 0, canvas.width, canvas.height);
}

function drawSnake() {
  snake.forEach((part, index) => {
    if (index === 0) {
      ctx.drawImage(headImg, part.x * gridSize, part.y * gridSize, gridSize, gridSize);
    } else {
      const grad = ctx.createLinearGradient(
        part.x * gridSize, part.y * gridSize,
        part.x * gridSize + gridSize, part.y * gridSize + gridSize
      );
      grad.addColorStop(0, "#00ff66");
      grad.addColorStop(1, "#004400");
      ctx.fillStyle = grad;
      ctx.shadowBlur = 15;
      ctx.shadowColor = "#00ff66";
      ctx.beginPath();
      ctx.roundRect(part.x * gridSize, part.y * gridSize, gridSize-1, gridSize-1, 4);
      ctx.fill();
      ctx.shadowBlur = 0;
    }
  });
}

function drawApple() {
  const grad = ctx.createRadialGradient(
    apple.x * gridSize + gridSize/2, apple.y * gridSize + gridSize/2, 2,
    apple.x * gridSize + gridSize/2, apple.y * gridSize + gridSize/2, gridSize/1.5
  );
  grad.addColorStop(0, apple.gold ? "#fff59b" : "#00ff66");
  grad.addColorStop(1, apple.gold ? "#ffbf00" : "#007733");
  ctx.fillStyle = grad;
  ctx.shadowBlur = apple.gold ? 30 : 10;
  ctx.shadowColor = apple.gold ? "#ffd700" : "#00ff66";
  ctx.beginPath();
  ctx.arc(apple.x * gridSize + gridSize/2, apple.y * gridSize + gridSize/2, gridSize/2.2, 0, Math.PI*2);
  ctx.fill();
  ctx.shadowBlur = 0;
}

function drawScore() {
  ctx.fillStyle = "#00ff66";
  ctx.font = "18px Orbitron";
  ctx.fillText("Score: " + score, 10, 20);
}

function updateSnake() {
  const head = {x: snake[0].x + vx, y: snake[0].y + vy};
  if (head.x < 0 || head.y < 0 || head.x >= tileCountX || head.y >= tileCountY || collision(head)) {
    gameOver();
    return;
  }

  snake.unshift(head);

  if (head.x === apple.x && head.y === apple.y) {
    score += apple.gold ? 50 : 10;
    if (score % 100 === 0 && speed > 60) {
      clearInterval(gameLoop);
      speed -= 10;
      gameLoop = setInterval(drawGame, speed);
    }
    spawnApple();
  } else {
    snake.pop();
  }
}

function collision(head) {
  return snake.some((part, i) => i !== 0 && part.x === head.x && part.y === head.y);
}

function spawnApple() {
  apple.x = Math.floor(Math.random() * tileCountX);
  apple.y = Math.floor(Math.random() * tileCountY);
  apple.gold = Math.random() < 0.1;
}

function gameOver() {
  clearInterval(gameLoop);
  playBgm();
  const name = prompt("Game Over! Enter your name:");
  if (name) saveScore(name, score);
  loadLeaderboard();
  resetGame();
}

function resetGame() {
  snake = [{x: 10, y: 10}];
  vx = 1; vy = 0;
  score = 0;
  speed = 120;
  clearInterval(gameLoop);
  gameLoop = setInterval(drawGame, speed);
}

function saveScore(name, score) {
  const data = JSON.parse(localStorage.getItem("raikuLeaderboard") || "[]");
  data.push({name, score});
  data.sort((a,b) => b.score - a.score);
  localStorage.setItem("raikuLeaderboard", JSON.stringify(data.slice(0,10)));
}

function loadLeaderboard() {
  const data = JSON.parse(localStorage.getItem("raikuLeaderboard") || "[]");
  const list = document.getElementById("scoreList");
  list.innerHTML = "";
  data.forEach((d) => {
    const li = document.createElement("li");
    li.textContent = `${d.name} - ${d.score}`;
    list.appendChild(li);
  });
}

document.addEventListener("keydown", (e) => {
  if (e.key === "ArrowUp" && vy !== 1) {vx=0;vy=-1;}
  if (e.key === "ArrowDown" && vy !== -1) {vx=0;vy=1;}
  if (e.key === "ArrowLeft" && vx !== 1) {vx=-1;vy=0;}
  if (e.key === "ArrowRight" && vx !== -1) {vx=1;vy=0;}
  if (e.key === " ") togglePause();
});

document.getElementById("pauseBtn").addEventListener("click", togglePause);
document.getElementById("soundToggle").addEventListener("click", toggleSound);
document.getElementById("upBtn").onclick = () => { if (vy !== 1) {vx=0;vy=-1;} };
document.getElementById("downBtn").onclick = () => { if (vy !== -1) {vx=0;vy=1;} };
document.getElementById("leftBtn").onclick = () => { if (vx !== 1) {vx=-1;vy=0;} };
document.getElementById("rightBtn").onclick = () => { if (vx !== -1) {vx=1;vy=0;} };

function togglePause() {
  paused = !paused;
  document.getElementById("pauseBtn").textContent = paused ? "‚ñ∂ Resume" : "‚è∏ Pause";
}

loadLeaderboard();
playBgm();
gameLoop = setInterval(drawGame, speed);
</script>
</body>
</html>
